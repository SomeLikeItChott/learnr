{% load static %}

<script src="{% static "cm/lib/codemirror.js" %}"></script>
<link rel="stylesheet" href="{% static "cm/lib/codemirror.css" %}">
<script src="{% static "cm/mode/python/python.js" %}"></script>

<link rel="stylesheet" href="{% static "css/hopscotch.css" %}">

<textarea style="width:100%; height:100%;" id="test_text"></textarea>
<div>
	<button id="interpret_button">Run my code</button>
</div>

<style>
	#CodeMirror
	{
		border: 1px solid #000;
		height:100%;
	}

</style>

<script>

	var myTextArea = document.getElementById("test_text");
	var myCodeMirror = CodeMirror.fromTextArea(myTextArea, {
		lineNumbers:true,
		mode:"python",
		lineWrapping:true,
		theme:"dracula"
	});
	myCodeMirror.setSize(myTextArea.width, "100%");

	$('#interpret_button').click(function(){
		code = myCodeMirror.getValue();
		console.log(code);
		console.log($('#test_text'));
		$.ajax({
			url: '{% url 'learnrapp:get_python_output' %}', 
			method: 'POST',
			data: { 'code': code },
			success: function(data, status){
				$('#output_console').val(data);
			}
		});
	});
</script>